try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d1dabdcc-6138-4cf3-975a-404157092075",e._sentryDebugIdIdentifier="sentry-dbid-d1dabdcc-6138-4cf3-975a-404157092075")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69562],{35749:function(e,t,a){a.d(t,{ZA:function(){return x},Cs:function(){return F},B:function(){return S},Q9:function(){return b},Te:function(){return w},eZ:function(){return A},zh:function(){return O},kt:function(){return K},Yf:function(){return J},vN:function(){return G},Qg:function(){return P},rP:function(){return B},WS:function(){return N},Kr:function(){return I},e5:function(){return R},mW:function(){return L},Cu:function(){return T},u_:function(){return D},pk:function(){return _},Xm:function(){return g},M6:function(){return C},SF:function(){return k},Zo:function(){return z},CQ:function(){return j}});var n=a(26090),o=a(23636),r=a(96162),i=a(63415),c=a(85753),l=a(70554),s=a(90919),d=a(68459),u=a(54389),p=a(21113),f=a(60493),h=a(77491),m=a(30487);let y=(0,p.Z)("file:///app/src/api/projects.ts"),g=(0,f.t)(!1),w=async e=>{let{projectId:t,chapterId:a}=e,n=await (0,r.hP)(),o="".concat(r.LB,"/v1/projects/").concat(t,"/chapters/").concat(a),i=await fetch(o,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});await (0,s._)({response:i})};class v extends Error{}let b=async e=>{let t,a,{clientId:i,projectId:c,chapterId:d,blockId:u,modelId:p,forceRegeneration:f,isFirstRequest:m,continueStream:w,voiceName:b,previousBlocks:_,nextBlocks:S,stitchMode:x,stsInput:k,onSuccess:j=null,onContentEnd:E=null,onChunkReceive:C=null,onAudioFinished:B=null,onAlignmentReceive:N=null,onTimeUpdateCallback:T,onReadyToPlay:L}=e,R=(0,l.YS)("audio/mpeg"),I=await (0,r.hP)(),F=k?"speech-to-speech":"text-to-speech",A=R?"".concat(r.LB,"/v2/projects/").concat(c,"/chapters/").concat(d,"/blocks/").concat(u,"/").concat(F,"/stream"):"".concat(r.LB,"/v2/projects/").concat(c,"/chapters/").concat(d,"/blocks/").concat(u,"/").concat(F);if(m&&(g.value=!0),m)t=w?{id:"synthesized_audio.mp3",autoStart:!0,name:(0,l.aR)({date_unix:(0,h.K9)(),name:"Conversion"}),fileName:(0,l.J9)({date_unix:(0,h.K9)(),name:"Conversion"}),type:"other",isFirstRequest:m,onTimeUpdateCallback:T,player:{title:(0,l.aR)({date_unix:(0,h.K9)(),name:"Conversion"}),description:(0,l.J9)({date_unix:(0,h.K9)(),name:"Conversion"})}}:{id:"synthesized_audio.mp3",autoStart:!0,name:(0,l.aR)({date_unix:(0,h.K9)(),name:b}),fileName:(0,l.J9)({date_unix:(0,h.K9)(),name:b}),type:"other",isFirstRequest:m,onTimeUpdateCallback:T,player:{title:(0,l.aR)({date_unix:(0,h.K9)(),name:"Conversion"}),description:(0,l.J9)({date_unix:(0,h.K9)(),name:"Conversion"})}};else{if(null===n.Qu.value)throw Error("Tried to continue stream but audioInfo is null, this should not happen ...");t={id:n.Qu.value.id,autoStart:n.Qu.value.autoStart,name:n.Qu.value.name,fileName:n.Qu.value.fileName,type:n.Qu.value.type,isFirstRequest:m,onTimeUpdateCallback:T,player:{title:(0,l.aR)({date_unix:(0,h.K9)(),name:"Conversion"}),description:(0,l.J9)({date_unix:(0,h.K9)(),name:"Conversion"})}}}R&&!L&&(0,n.Eb)(t),m&&!L&&(0,l.zK)();try{let e;if(k?((e=new FormData).append("audio",k.file),e.append("similarity_boost",k.voiceSettings.similarity_boost.toString()),e.append("stability",k.voiceSettings.stability.toString()),e.append("style",k.voiceSettings.style.toString()),e.append("use_speaker_boost",k.voiceSettings.use_speaker_boost.toString())):e=JSON.stringify({client_id:i,model_id:p,force_regeneration:f,previous_blocks:_,next_blocks:S,stitch_mode:null!=x?x:"use_provided_blocks"}),a=await fetch(A,{method:"POST",headers:{...e instanceof FormData?{}:{"Content-Type":"application/json"},Authorization:"Bearer ".concat(I)},body:e}),!await (0,s._)({response:a}))throw new v("Failed to convert block text to speech")}catch(e){y.error(e),(0,n.ob)(),g.value=!1,e instanceof v||(0,o.default)("Network error, please try again.");return}return(L||(0,n.nw)(B),R)?L?(0,l.B5)({response:a,onContentStart:e=>{L(e),null==j||j()},onChunkReceive:e=>{(0,n.Tv)(e),null==C||C(e)},onAlignmentReceive:N,onContentEnd:E}):(0,l.D6)({response:a,audioEl:n._m.value,onContentStart:()=>{null!==j&&j(),g.value=!1},onChunkReceive:e=>{(0,n.Tv)(e),null==C||C(e)},onContentEnd:E,continueStream:w,isFirstRequest:m}):(0,l.KP)({response:a,onReadyToPlay:e=>{null==L||L(e)},onAlignmentReceive:N,onContentEnd:E})},_=async e=>{let{project:t,projectAudioSnapshotId:a}=e;if(!(0,l.YS)("audio/mpeg")){(0,o.default)("Your browser doesnt support .mp3 streaming and the audio of a project is therefore disabled. If you want to play the audio directly in the browser please switch to a browser that supports .mp3 streaming like Chrome.");return}let i=await (0,r.hP)(),c="".concat(r.LB,"/v1/projects/").concat(t.project_id,"/snapshots/").concat(a,"/stream");(0,n.Eb)({id:"project.mp3",autoStart:!0,name:(0,l.aR)({name:t.name,date_unix:(0,h.K9)()}),fileName:(0,l.J9)({name:t.name,date_unix:(0,h.K9)()}),type:"other",isFirstRequest:!0,player:{title:(0,l.aR)({name:t.name,date_unix:(0,h.K9)()}),description:(0,l.J9)({name:t.name,date_unix:(0,h.K9)()})}});let d=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({convert_to_mpeg:!0})});await (0,s._)({response:d,onSuccess:async()=>{await (0,l.D6)({response:d,audioEl:n._m.value,onChunkReceive:n.Tv})}})},S=async e=>{let{name:t,defaultTitleVoiceId:a,defaultParagraphVoiceId:n,defaultModelId:o,url:i=null,inputFile:c=null,onSuccess:l=null,onError:s=null,qualityPreset:d,title:u,author:p,isbnNumber:f,acxVolumeNormalization:h,pronunciationDictionaries:m,description:y,genres:g,targetAudience:w,language:v,contentTypes:b,originalPublicationDate:_,matureContent:S,autoAssignVoices:x=!1,sourceType:k="blank"}=e;if(null!==c&&null!==i)throw Error("URL and inputFile are both not null, this should never happen ...");let j=await (0,r.hP)(),E=new FormData;E.append("name",t),E.append("default_title_voice_id",a),E.append("default_paragraph_voice_id",n),E.append("default_model_id",o),null!==c&&E.append("from_document",c),null!==i&&E.append("from_url",i),E.append("quality_preset",d),null!==u&&E.append("title",u),null!==p&&E.append("author",p),null!==f&&E.append("isbn_number",f),null!==h&&E.append("volume_normalization",h.toString()),m.length>0&&E.append("pronunciation_dictionary_locators",m.map(e=>JSON.stringify({pronunciation_dictionary_id:e.id,version_id:e.versionId})).toString()),y&&E.append("description",y),g&&E.append("genres",g.toString()),w&&E.append("target_audience",w),v&&E.append("language",v),b&&E.append("content_types",b.toString()),_&&E.append("original_publication_date",_),S&&E.append("mature_content",S.toString()),k&&E.append("source_type",k),E.append("auto_assign_voices",x.toString());let C=await fetch("".concat(r.LB,"/v1/projects/add"),{method:"POST",body:E,headers:{Authorization:"Bearer ".concat(j)}});200==C.status?null!==l&&l((await C.json()).project):null!==s&&s((await C.json()).detail.message)},x=async e=>{let{projectId:t,name:a,url:n=null,onSuccess:o=null,onError:i=null}=e,c=await (0,r.hP)();await fetch("".concat(r.LB,"/v1/projects/").concat(t,"/chapters/add"),{method:"POST",headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"},body:JSON.stringify({name:a,from_url:n})}).then(e=>{200===e.status?null!==o&&o():null!==i&&e.json().then(e=>i(e.detail.message))})},k=async e=>{let t=await (0,r.hP)();if(null===t)return;let a=await fetch("".concat(r.LB,"/v1/projects/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});await (0,s._)({response:a})};function j(){return(0,m.Waj)()}function E(e){g.value=!0,(0,n.Eb)({id:"synthesized_audio.mp3",autoStart:!0,name:null!=e?e:"Selection",fileName:"synthesized_audio.mp3",type:"other",isFirstRequest:!0,onTimeUpdateCallback:void 0,player:{title:null!=e?e:"Selection",description:"synthesized_audio.mp3"}}),(0,l.zK)()}async function C(e){let t,a,{clientId:i,projectId:c,chapterId:d,blockId:u,startIndex:p,endIndex:f,onAudioFinished:h=null,playerTitle:m=null,onChunkReceive:w=null,onAlignmentReceive:b=null,onReadyToPlay:_=null,onContentEnd:S=null,stsInput:x=null}=e;E(m),(0,n.nw)(h);let k=await (0,r.hP)(),j=x?"".concat(r.LB,"/v2/projects/").concat(c,"/chapters/").concat(d,"/blocks/").concat(u,"/speech-to-speech/regenerate-fragment"):"".concat(r.LB,"/v2/projects/").concat(c,"/chapters/").concat(d,"/blocks/").concat(u,"/regenerate-fragment");x?(t=new FormData,i&&t.append("client_id",i),t.append("start_index",p.toString()),t.append("end_index",f.toString()),t.append("audio",x.file),t.append("similarity_boost",x.voiceSettings.similarity_boost.toString()),t.append("stability",x.voiceSettings.stability.toString()),t.append("style",x.voiceSettings.style.toString()),t.append("use_speaker_boost",x.voiceSettings.use_speaker_boost.toString())):t=JSON.stringify({client_id:i,start_index:p,end_index:f});try{if(a=await fetch(j,{method:"POST",headers:{Authorization:"Bearer ".concat(k),...t instanceof FormData?{}:{"Content-Type":"application/json"}},body:t}),!await (0,s._)({response:a}))throw new v("Failed to convert block text to speech")}catch(e){y.error(e),(0,n.ob)(),g.value=!1,e instanceof v||(0,o.default)("Network error, please try again.");return}_?await (0,l.B5)({response:a,onContentStart:e=>{_(e)},onChunkReceive:async e=>{(0,n.Tv)(e),null==w||w(e)},onAlignmentReceive:e=>{null==b||b(e)},onContentEnd:S}):await (0,l.D6)({response:a,audioEl:n._m.value,onContentStart:()=>{g.value=!1},onChunkReceive:n.Tv,onContentEnd:S,continueStream:!1})}async function B(e){let{clientId:t,projectId:a,chapterId:n,blockId:o,startIndex:i,endIndex:c,stsInput:d=null}=e,u=[];try{let e;let p=await (0,r.hP)(),f=d?"".concat(r.LB,"/v2/projects/").concat(a,"/chapters/").concat(n,"/blocks/").concat(o,"/speech-to-speech/regenerate-fragment"):"".concat(r.LB,"/v2/projects/").concat(a,"/chapters/").concat(n,"/blocks/").concat(o,"/regenerate-fragment");d?(e=new FormData,t&&e.append("client_id",t),e.append("start_index",i.toString()),e.append("end_index",c.toString()),e.append("audio",d.file),e.append("similarity_boost",d.voiceSettings.similarity_boost.toString()),e.append("stability",d.voiceSettings.stability.toString()),e.append("style",d.voiceSettings.style.toString()),e.append("use_speaker_boost",d.voiceSettings.use_speaker_boost.toString())):e=JSON.stringify({client_id:t,start_index:i,end_index:c});let h=await fetch(f,{method:"POST",headers:{Authorization:"Bearer ".concat(p),...e instanceof FormData?{}:{"Content-Type":"application/json"}},body:e});if(!await (0,s._)({response:h})){let e=await h.text();throw y.error("handleResponse failed in regenerateBlockFragmentAndGetAudioBuffer. Status: ".concat(h.status,". Body: ").concat(e.substring(0,200))),new v("Server error during regeneration (status ".concat(h.status,")."))}return await (0,l.B5)({response:h,onChunkReceive:e=>{u.push(e.slice(0))}}),function(e){let t=0;for(let a of e)t+=a.byteLength;let a=new Uint8Array(t),n=0;for(let t of e)a.set(new Uint8Array(t),n),n+=t.byteLength;return a.buffer}(u)}catch(e){throw y.error("Error in regenerateBlockFragmentAndGetAudioBuffer:",e),e}}async function N(e){let{projectId:t,chapterId:a,blockId:n,stsInput:o}=e;try{let e=await (0,r.hP)(),i="".concat(r.LB,"/v2/projects/").concat(t,"/chapters/").concat(a,"/blocks/").concat(n,"/speech-to-speech"),c=new FormData;c.append("audio",o.file),c.append("similarity_boost",o.voiceSettings.similarity_boost.toString()),c.append("stability",o.voiceSettings.stability.toString()),c.append("style",o.voiceSettings.style.toString()),c.append("use_speaker_boost",o.voiceSettings.use_speaker_boost.toString());let d=await fetch(i,{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:c});if(!await (0,s._)({response:d})){let e=await d.text();throw y.error("handleResponse failed in getBlockStsAudioBuffer. Status: ".concat(d.status,". Body: ").concat(e.substring(0,200))),new v("Server error during STS audio generation (status ".concat(d.status,")."))}let u=await d.json();if(u&&"string"==typeof u.audio_base64)return(0,l.RG)(u.audio_base64);throw y.error("audio_base64 field not found or not a string in response from getBlockStsAudioBuffer endpoint.",u),Error("Invalid response format from STS audio generation endpoint.")}catch(e){throw y.error("Error in getBlockStsAudioBuffer:",e),e}}async function T(e){let t,{clientId:a,projectId:i,chapterId:c,blockId:d,startIndex:u,endIndex:p,onAudioFinished:f=null,playerTitle:h=null,onChunkReceive:m=null,onAlignmentReceive:w=null,onReadyToPlay:b=null,onContentEnd:_=null}=e;E(h),(0,n.nw)(f);let S=await (0,r.hP)(),x="".concat(r.LB,"/v2/projects/").concat(i,"/chapters/").concat(c,"/blocks/").concat(d,"/play-fragment");try{if(t=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(S)},body:JSON.stringify({client_id:a,start_index:u,end_index:p})}),!await (0,s._)({response:t}))throw new v("Failed to convert block text to speech")}catch(e){y.error(e),(0,n.ob)(),g.value=!1,e instanceof v||(0,o.default)("Network error, please try again.");return}b?await (0,l.B5)({response:t,onContentStart:e=>{b(e)},onContentEnd:_,onAlignmentReceive:e=>{null==w||w(e)},onChunkReceive:async e=>{(0,n.Tv)(e),null==m||m(e)}}):await (0,l.D6)({response:t,audioEl:n._m.value,onContentStart:()=>{g.value=!1},onChunkReceive:n.Tv,onContentEnd:_,continueStream:!1})}async function L(e){let{cursor:t="",pageSize:a=25,search:n,filterByCreator:o="all"}=e,i=n&&n.trim().length>0?"&search=".concat(n):"",c="".concat(r.LB,"/v1/projects/search?cursor=").concat(t,"&page_size=").concat(a).concat(i,"&filter_by_creator=").concat(o);try{let e=await (0,d.w)(c,"GET");return await e.json()}catch(e){throw(0,d.m)(e,"Failed to fetch projects, please retry."),e}}async function R(e){let t="".concat(r.LB,"/v1/projects/").concat(e);try{let e=await (0,d.w)(t,"GET");return await e.json()}catch(e){throw(0,d.m)(e,"Failed to fetch the project, please retry."),e}}async function I(e,t){let a="".concat(r.LB,"/v1/projects/").concat(e,"/chapters/").concat(t,"/blocks");try{let e=await (0,d.w)(a,"GET");return await e.json()}catch(e){throw(0,d.m)(e,"Failed to fetch the chapter content, please retry."),e}}async function F(e,t){let a="".concat(r.LB,"/v1/projects/").concat(e,"/chapters/add");try{let e=await (0,d.w)(a,"POST",{body:JSON.stringify({name:t})});return await e.json()}catch(e){throw(0,d.m)(e,"Failed to add a chapter, please retry."),e}}async function A(e,t){let a="".concat(r.LB,"/v1/projects/").concat(e,"/chapters/").concat(t);try{let e=await (0,d.w)(a,"DELETE");return await e.json()}catch(e){throw(0,d.m)(e,"Failed to delete a chapter, please retry."),e}}async function P(e,t,a){let n="".concat(r.LB,"/v1/projects/").concat(e,"/chapters/").concat(t,"/blocks/").concat(a);try{let e=await (0,d.w)(n,"GET");return await e.json()}catch(e){throw(0,d.m)(e,"Failed to fetch a block, please retry."),e}}async function z(e,t,a,n){let o="".concat(r.LB,"/v1/projects/").concat(e,"/chapters/").concat(t,"/blocks/").concat(a,"/snapshots/").concat(n,"/restore");try{let n=await (0,d.w)(o,"POST"),r=await n.json();return(0,i.eN)(c.B_.project_history_restored,{projectId:e,chapterId:t,blockId:a}),r}catch(e){throw(0,d.m)(e,"Failed to restore a block snapshot, please retry."),e}}async function D(e,t,a,n,o,s){let u=new URLSearchParams({convert_to_mpeg:"true"}).toString(),p="".concat(r.LB,"/v1/projects/").concat(e,"/chapters/").concat(t,"/blocks/").concat(a,"/snapshots/").concat(n,"/stream?").concat(u);try{let n=await (0,d.w)(p,"GET");await (0,l.D6)({response:n,audioEl:o,onContentStart:s,continueStream:!1}),(0,i.eN)(c.B_.project_history_played,{projectId:e,chapterId:t,blockId:a})}catch(e){throw(0,d.m)(e,"Failed to restore a block snapshot, please retry."),e}}async function O(e){let{projectId:t,chapterId:a,blockId:n,snapshotId:o,fileName:l}=e,s="".concat(r.LB,"/v1/projects/").concat(t,"/chapters/").concat(a,"/blocks/").concat(n,"/snapshots/").concat(o,"/stream");try{let e=await (0,d.w)(s,"GET");return(0,i.eN)(c.B_.project_history_download,{projectId:t,chapterId:a,blockId:n}),(0,u.AH)({response:e,fileName:l})}catch(e){throw(0,d.m)(e,"Failed to restore a block snapshot, please retry."),e}}async function K(e){let{projectId:t,chapterId:a,blockId:n,nodeId:o}=e,i="".concat(r.LB,"/v1/projects/").concat(t,"/chapters/").concat(a,"/blocks/").concat(n,"/nodes/").concat(o,"/audio");try{let t=await (0,d.w)(i,"POST",{body:JSON.stringify({client_id:e.clientId,force_regeneration:e.forceRegeneration,model_id:e.modelId,node_id:e.nodeId,block_id:e.blockId,chapter_id:e.chapterId})});if(!t.ok)throw Error("Failed to fetch node audio, please retry.");try{return await t.json()}catch(e){throw Error("API error: Failed to parse JSON response from ".concat(i," for node ").concat(o,"."))}}catch(e){throw(0,d.m)(e,"Failed to fetch node audio, please retry."),e}}async function J(e){let{projectId:t,chapterId:a,soundEffectId:n}=e,o="".concat(r.LB,"/v1/studio/projects/").concat(t,"/chapters/").concat(a,"/sound-effect/").concat(n,"/play"),i="".concat(r.LB,"/v1/studio/projects/").concat(t,"/chapters/").concat(a,"/sound-effect/").concat(n,"/offset");try{let e=await (0,d.w)(o,"GET");if(!e.ok)throw Error("Failed to fetch SFX audio, please retry.");let t=await e.arrayBuffer();if(0===t.byteLength)throw Error("Received empty audio data (0 bytes) for SFX ID: ".concat(n));let a=await (0,d.w)(i,"GET");if(!a.ok)throw Error("Failed to fetch SFX details, please retry.");let r=await a.json();return{audioBuffer:t,nodeOffsetMs:r.tts_node_offset_ms}}catch(e){throw(0,d.m)(e,"Failed to fetch SFX audio, please retry."),e}}async function G(e){let{projectId:t,chapterId:a,videoId:n}=e,o="".concat(r.LB,"/v1/studio/projects/").concat(t,"/chapters/").concat(a,"/videos/").concat(n,"/audio");try{return await X(async()=>{let e=await (0,d.w)(o,"GET",{});if(!e.ok||!e.body)throw Error("Failed to fetch video audio, please retry.");let t=e.body.getReader(),a=[],n=0;try{for(;;){let{done:e,value:o}=await t.read();if(e)break;o&&(a.push(o),n+=o.byteLength)}}finally{t.releaseLock()}let r=new Uint8Array(n),i=0;for(let e of a)r.set(e,i),i+=e.length;return r.buffer})}catch(e){throw(0,d.m)(e,"Failed to fetch video audio, please retry."),e}}let X=async function(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=3;for(;n>0;)try{return await e()}catch(e){t=e,--n>0&&await M(a)}throw t};async function M(e){return new Promise(t=>setTimeout(t,e))}},12567:function(e,t,a){a.d(t,{X:function(){return d}});var n=a(68088),o=a(58603),r=a(73886),i=a(47607),c=a(9506),l=a(60189);let s=(0,r.j)("relative peer shrink-0 rounded-md border border-subtle shadow focus-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-alpha-900 data-[state=checked]:text-background",{variants:{size:{md:"h-5 w-5",sm:"h-4 w-4"}},defaultVariants:{size:"md"}}),d=c.forwardRef((e,t)=>{let{className:a,size:r,...c}=e;return(0,n.jsxs)(o.fC,{ref:t,className:(0,l.cn)(s({size:r}),a),...c,children:[(0,n.jsx)("div",{className:"checkbox-hitarea overlay -inset-1.5"}),(0,n.jsx)(o.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(i.Z,{className:"sm"===r?"h-3 w-4":"h-4 w-4"})})]})});d.displayName=o.fC.displayName},46547:function(e,t,a){a.d(t,{I:function(){return c}});var n=a(68088),o=a(9506),r=a(54995),i=a(60189);let c=o.forwardRef((e,t)=>{let{className:a,type:o,elId:c,elContext:l,...s}=e,d=(0,r.useExtendCoreComponentWithExternalAccessibility)(t,c,l,e=>{var t;"string"==typeof e&&d.current&&(d.current.value=e,null===(t=s.onChange)||void 0===t||t.call(s,{target:{value:e}}))},()=>s.value);return(0,n.jsx)("input",{type:o,className:(0,i.cn)("flex h-9 w-full rounded-[10px] border border-gray-alpha-200 bg-transparent px-3 py-1 text-sm shadow-none transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-subtle focus-ring focus-visible:border-foreground hover:border-gray-alpha-300 focus-visible:ring-[0.5px] focus-visible:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50","[&:-webkit-autofill]:shadow-[inset_0_0_0px_1000px_hsl(var(--background))]","[&:-webkit-autofill]:[-webkit-text-fill-color:hsl(var(--foreground))]","[&:-webkit-autofill]:border-gray-200 [&:-webkit-autofill]:focus:border-foreground","[&_input:-moz-autofill]:shadow-[inset_0_0_0px_1000px_hsl(var(--background))]","[&_input:-moz-autofill]:text-fill-color-[hsl(var(--foreground))]","[&_input:-moz-autofill]:border-gray-200 [&_input:-moz-autofill]:focus:border-foreground",a),ref:d,...s})});c.displayName="Input"},96474:function(e,t,a){a.d(t,{Label:function(){return s}});var n=a(68088),o=a(70220),r=a(9506),i=a(60189),c=a(11521),l=a(25933);let s=r.forwardRef((e,t)=>{let{size:a="sm",color:s="foreground",weight:d="medium",truncate:u,tooltip:p,className:f,children:h,...m}=e,{isOpen:y,onOpen:g,onToggle:w,onClose:v}=(0,o.q)(),[b,_]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=window.setTimeout(()=>{_(y)},y?400:0);return()=>{window.clearTimeout(e)}},[y]),(0,n.jsx)(l.Tooltip,{isDisabled:!p,label:p,className:"!text-sm",isOpen:b,children:(0,n.jsx)(c.x,{size:a,color:s,weight:d,truncate:u,className:(0,i.cn)(m.htmlFor&&"cursor-pointer",p&&"underline decoration-dotted underline-offset-2 decoration-gray-alpha-400",f),asChild:!0,children:(0,n.jsx)("label",{ref:t,...m,onMouseEnter:g,onMouseLeave:v,onClick:w,children:h})})})})},32689:function(e,t,a){a.d(t,{Ek:function(){return z},HC:function(){return F},L9:function(){return P},UB:function(){return L},aV:function(){return B},cT:function(){return D},tF:function(){return o},yr:function(){return A}});var n,o,r=a(17024),i=a(68088),c=a(53164),l=a(46736),s=a(40534),d=a(97968),u=a(5479),p=a(81999),f=a(9506),h=a(54995),m=a(25933),y=a(60189),g=a(39255),w=a(21113),v=a(12567);let b=(0,w.Z)("file:///app/src/core/components/list.tsx");(n=o||(o={})).View="view",n.Edit="edit";class _{addItem(e){let{group:t,item:a}=e;this.groups[t]||(this.groups[t]=new Set),this.groups[t].add(a)}removeItem(e){var t;let{group:a,item:n}=e;null===(t=this.groups[a])||void 0===t||t.delete(n)}constructor(){(0,r._)(this,"groups",{}),(0,u.rC)(this,{groups:u.LO})}}let S=(e,t)=>e.querySelectorAll('[data-group="'.concat(t,'"]')),x=(e,t)=>e.querySelector('[data-group="'.concat(t,'"]')),k=e=>{if(!(document.activeElement instanceof HTMLElement))return;let t=document.activeElement.id,a=document.activeElement.dataset.group;if(!t||!a)return;let n=Array.from(S(e.currentTarget,a)).filter(e=>null===e.getAttribute("disabled")),o=n.findIndex(e=>e.id===t);if(-1!==o)switch(e.key){case"ArrowDown":e.preventDefault(),n[(o+1)%n.length].focus();break;case"ArrowUp":e.preventDefault(),n[(o-1+n.length)%n.length].focus()}},j=()=>{let e=(0,f.useRef)(0);return[(0,f.useCallback)(()=>{e.current=Date.now()},[]),(0,f.useCallback)(()=>Date.now()-e.current,[])]},E=(0,f.createContext)(null),C=()=>{let e=(0,f.useContext)(E);if(!e)throw Error("useList can only be called inside of List");return e},B=(0,f.forwardRef)((e,t)=>{let{mode:a="view",selection:n,allSelectableItems:o,forceSelectableRange:r,onSelectionChange:c,className:l,children:s,...d}=e,u=(0,f.useRef)(null),p=(0,f.useId)(),[h]=(0,f.useState)(()=>new _),m=(0,f.useRef)(null),g=(0,f.useMemo)(()=>new Set(n),[JSON.stringify(n)]),w=e=>{m.current=e[0];let t=new Set(g);e.forEach(e=>{t.add(e)}),null==c||c(Array.from(t))};return(0,f.useImperativeHandle)(t,()=>({element:u.current,focusFirstListItem(){var e;null===(e=x(u.current,p))||void 0===e||e.focus()}}),[]),(0,i.jsx)(E.Provider,{value:{mode:a,schema:h,selection:g,addItems:w,addRemoveRange:e=>{if(!o){b.warn("This function is not available without allSelectableItems prop");return}if(g.size||w([e]),null===m.current)return;let t=g.has(e),[a,n]=[o.indexOf(e),o.indexOf(m.current)].sort((e,t)=>e-t),r=o.slice(a,n+1),i=new Set(g);r.forEach(e=>{t?i.delete(e):i.add(e)}),m.current=e,null==c||c(Array.from(i))},isRangeSelectable:!!o&&!!g.size,removeItems:e=>{m.current=e[0];let t=new Set(g);e.forEach(e=>{t.delete(e)}),null==c||c(Array.from(t))},forceSelectableRange:r},children:(0,i.jsx)(N.Provider,{value:{id:p,collapsed:!1},children:(0,i.jsx)("ul",{ref:u,className:(0,y.cn)("eleven-list",l),onKeyDown:k,...d,children:s})})})}),N=(0,f.createContext)(null),T=()=>{let e=(0,f.useContext)(N);if(!e)throw Error("useGroup can only be called inside of ListItemGroup");return e},L=(0,p.Pi)((0,f.forwardRef)((e,t)=>{let{label:a,collapsible:n=!1,defaultCollapsed:o=!1,classes:r={},className:u,children:p,selectable:h=!0,...m}=e,g=C(),w=T(),b=(0,f.useId)(),[_,S]=(0,f.useState)(o),x={groupTrigger:"list-item-group-trigger-".concat(b),groupSection:"list-item-group-section-".concat(b),groupLabel:"list-item-group-label-".concat(b)},k=g.schema.groups[b]||new Set,j=k.size,E=0;return k.forEach(e=>{g.selection.has(e)&&(E+=1)}),(0,i.jsx)(N.Provider,{value:{id:b,collapsed:_},children:(0,i.jsxs)("li",{...m,ref:t,className:(0,y.cn)(r.root,u),"data-expanded":!_,children:[(0,i.jsx)(c.g7,{ref:e=>{(null==e?void 0:e.parentElement)&&(e.parentElement.ariaHidden="false")},children:(0,i.jsxs)(n?"button":"div",{className:(0,y.cn)("eleven-list-item-group hstack items-center gap-3 p-3 border-b text-start w-full overflow-hidden outline-gray-alpha-950",r.heading),id:n?x.groupTrigger:void 0,"aria-controls":n?x.groupSection:void 0,"aria-expanded":n?!_:void 0,"aria-labelledby":x.groupLabel,"data-expanded":!_,"data-group":w.id,onClick:()=>{n&&S(e=>!e)},children:[(0,i.jsx)("div",{className:"-mr-3",children:(0,i.jsx)(l.M,{initial:!1,children:h&&"edit"===g.mode&&(0,i.jsx)(s.E.div,{initial:{width:0,x:-24,opacity:0},animate:{width:"auto",x:0,opacity:1},exit:{width:0,x:-24,opacity:0},transition:{duration:.2},children:(0,i.jsx)(v.X,{className:"relative z-10 block mr-3 bg-background",checked:E===j,onCheckedChange:e=>{e?g.addItems(Array.from(k)):g.removeItems(Array.from(k))},onClick:e=>e.stopPropagation()})})})}),(0,i.jsx)("div",{className:"flex-1",id:x.groupLabel,children:a}),n&&(0,i.jsx)(d.Z,{className:(0,y.cn)("h-4 w-4 min-w-fit transition-transform duration-150",_?"-rotate-90":"rotate-0")})]})}),(0,i.jsxs)(s.E.ul,{className:(0,y.cn)("stack overflow-hidden",r.content),id:x.groupSection,"aria-labelledby":x.groupLabel,"data-expanded":!_,animate:_?{height:0,opacity:0,transitionEnd:{display:"none"}}:{height:"auto",opacity:1,display:"block"},children:[p,(0,i.jsx)("div",{className:(0,y.cn)("mx-3 border-b border-subtle",r.divider),"aria-hidden":!0})]})]})})})),R=(0,f.createContext)(null),I=()=>{let e=(0,f.useContext)(R);if(!e)throw Error("useListItem can only be called inside of ListItem");return e},F=(0,p.Pi)((0,f.forwardRef)((e,t)=>{let{value:a,disabled:n,className:o,children:r,onPress:c,onClick:d,onMouseDown:u,disableTextSelect:p=!1,elId:h,elContext:w,...b}=e,_=(0,f.useId)(),S=C(),x=T(),[k,E]=j(),[B,{add:N,remove:L}]=(0,g.$X)(),I=B.size>0,F=x.collapsed||n;return(0,f.useEffect)(()=>{if(("edit"===S.mode||S.forceSelectableRange)&&a)return S.schema.addItem({group:x.id,item:a}),()=>{S.schema.removeItem({group:x.id,item:a})}},[x.id,a,S.schema,S.mode]),(0,i.jsx)(R.Provider,{value:{id:_,disabled:F,onPress:c,addTrigger:N,removeTrigger:L},children:(0,i.jsxs)("li",{...b,id:_,className:(0,y.cn)("eleven-list-item hstack items-center p-3 gap-3 transition-colors duration-150 relative [&:has([data-type='list-item-trigger']:focus)]:bg-gray-alpha-100",{"hover:bg-gray-alpha-50 cursor-pointer":I&&!F,"select-none":p},o),ref:t,onMouseDown:e=>{null==u||u(e),k()},onClick:e=>{if(S.forceSelectableRange&&e.shiftKey&&a){e.stopPropagation(),e.preventDefault(),S.selection.size?S.addRemoveRange(a):S.addItems([a]);return}null==d||d(e),I&&!F&&(!p&&E()>200||B.forEach(e=>{var t;null===(t=document.getElementById(e))||void 0===t||t.click()}))},children:[(0,i.jsx)("div",{className:"-mr-3",children:(0,i.jsx)(l.M,{initial:!1,children:"edit"===S.mode&&a&&(0,i.jsx)(s.E.div,{initial:{width:0,x:-24,opacity:0},animate:{width:"auto",x:0,opacity:1},exit:{width:0,x:-24,opacity:0},transition:{duration:.2},children:S.isRangeSelectable?(0,i.jsx)(m.Tooltip,{label:"Shift+Click to select range",placement:"left",children:(0,i.jsx)(v.X,{className:"z-10 block mr-3",checked:S.selection.has(a),onClick:e=>{e.stopPropagation(),S.selection.has(a)?e.shiftKey&&S.isRangeSelectable?S.addRemoveRange(a):S.removeItems([a]):e.shiftKey&&S.isRangeSelectable?S.addRemoveRange(a):S.addItems([a])}})}):(0,i.jsx)(v.X,{className:"z-10 block mr-3",checked:S.selection.has(a),onClick:e=>{e.stopPropagation(),S.selection.has(a)?S.removeItems([a]):S.addItems([a])}})})})}),r]})})}));F.displayName="ListItem";let A=(0,f.forwardRef)((e,t)=>{let{asChild:a,className:n,overlay:o,onClick:r,elId:l,elContext:s,...d}=e,u=(0,h.useExtendCoreComponentWithExternalAccessibility)(t,l,s),p=(0,f.useId)(),{id:m,disabled:g,onPress:w,addTrigger:v,removeTrigger:b}=I(),_=T(),S=a?c.g7:"button";return(0,f.useEffect)(()=>(v(p),()=>b(p)),[p,v,b]),(0,i.jsx)(S,{id:p,ref:u,className:(0,y.cn)("text-left rounded",o?"absolute inset-0 focus:outline-none focus-visible:ring-[1.5px] ring-inset ring-gray-alpha-950":"px-1.5 -mx-1.5 outline-gray-alpha-950",n),"aria-labelledby":o&&!d["aria-label"]?m:void 0,disabled:g,onClick:e=>{if(e.shiftKey||e.stopPropagation(),document.activeElement!==u.current){var t;null===(t=u.current)||void 0===t||t.focus()}null==r||r(e),null==w||w(e)},...d,"data-group":_.id,"data-type":o?"list-item-trigger-overlay":"list-item-trigger"})});A.displayName="ListItemTrigger";let P=(0,f.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{...n,ref:t,className:(0,y.cn)("h-10 w-10 center bg-gray-alpha-100 rounded-[10px]",a)})});P.displayName="ListItemAvatar";let z=(0,f.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{...n,ref:t,className:(0,y.cn)("relative flex-1 min-w-0",a)})});z.displayName="ListItemContent";let D=(0,f.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)("div",{...n,ref:t,onClick:e=>e.stopPropagation(),className:(0,y.cn)("relative hstack gap-2 items-center w-fit",a)})});D.displayName="ListItemActions"},68459:function(e,t,a){a.d(t,{m:function(){return s},w:function(){return l}});var n=a(23636),o=a(96162);let r=(0,a(21113).Z)("file:///app/src/utils/fetch.ts");class i extends Error{}class c extends Error{}async function l(e,t){let a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=await (0,o.hP)();if(!l)throw Error("No access token found");try{let{headers:o,...r}=n;a=await fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l),...null!=o?o:{}},...null!=r?r:{}})}catch(e){throw r.error(e),new c("Failed to fetch "+e)}if(!a.ok){let e=await a.json();throw new i("string"==typeof e.detail?e.detail:e.detail.message)}return a}function s(e,t){e instanceof i?(0,n.default)(e.message):e instanceof c&&(0,n.default)(t)}}}]);