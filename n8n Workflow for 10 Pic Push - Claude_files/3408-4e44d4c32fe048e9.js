"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1291,3408],{2881:(e,t,n)=>{n.d(t,{O:()=>p});var s=n(54568),a=n(41417),i=n(29242),r=n(99272),l=n(76761),o=n(32987),c=n(37463),d=n(7620),u=n(93271);let p=d.forwardRef((e,t)=>{let{indicatorActive:n,disabled:d,text:p,tag:h,className:m,buttonClassName:x,tooltip:g,hideIndicatorText:f,icon:b,showRemoveIcon:y,showCaretIcon:v,...j}=e,w=(0,s.jsx)(c.P.div,{className:(0,o.A)("flex",p?"shrink min-w-8":"shrink-0",m),initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},children:(0,s.jsxs)(a.$,{variant:"unstyled",size:"unset",className:(0,o.A)("border-0.5 transition-all h-8 min-w-8 rounded-lg flex items-center px-[7.5px] group !pointer-events-auto !outline-offset-1",n?"text-accent-secondary-100 bg-accent-secondary-100/[8%] border-accent-secondary-200/20":"text-text-300 border-border-300",!d&&(n?"active:scale-[0.98] hover:text-accent-secondary-000 hover:bg-accent-secondary-100/[12%]":"active:scale-[0.98] hover:text-text-200/90 hover:bg-bg-100"),x),disabled:d,"aria-pressed":n,...j,children:[b,!!p&&!f&&(0,s.jsxs)("div",{className:"min-w-0 flex items-center",children:[(0,s.jsx)("p",{className:"min-w-0 pl-1 text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden shrink",children:p}),!!h&&(0,s.jsx)(u.u,{tag:h,className:"!top-0 !ml-1"})]}),v&&(0,s.jsx)(r.a,{size:12,className:"ml-1 opacity-70"}),!d&&y&&(0,s.jsx)("div",{className:"duration-100 w-0 group-hover:w-3 opacity-0 group-hover:opacity-70 transition-all ml-0 group-hover:ml-1",children:(0,s.jsx)(l.X,{size:12})})]})});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.m,{tooltipContent:g,disableHoverableContent:!0,side:"bottom",align:"center",children:w})})});p.displayName="InputMenuButton"},36881:(e,t,n)=>{n.d(t,{H:()=>b});var s=n(54568),a=n(9340),i=n(41417),r=n(29242),l=n(95663),o=n(82327),c=n(6157),d=n(49645),u=n(37463),p=n(7620),h=n(46760),m=n(62971),x=n(62757),g=n(37076);let f=e=>{let{isOpen:t,onClose:n,onConfirm:a,isLoading:r=!1}=e,l=(0,p.useCallback)(e=>{"Enter"!==e.key||r||a()},[a,r]);return(0,p.useEffect)(()=>(t&&window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}),[t,l]),(0,s.jsxs)(g.aF,{isOpen:t,onClose:n,title:(0,s.jsx)(m.A,{defaultMessage:"Want to stop researching?",id:"H+/TRHeeuc"}),children:[(0,s.jsx)("div",{className:"mt-4 mb-6",children:(0,s.jsx)(m.A,{defaultMessage:"This can’t be undone. If you want to research this topic again, you can ask in this chat or start a new session.",id:"RuV1dagwp6"})}),(0,s.jsxs)(g.vW,{children:[(0,s.jsx)(i.$,{variant:"danger",onClick:a,disabled:r,autoFocus:!0,children:(0,s.jsx)(m.A,{defaultMessage:"Stop research",id:"l3tljn/kXe"})}),(0,s.jsx)(i.$,{variant:"secondary",onClick:n,children:(0,s.jsx)(m.A,{defaultMessage:"Keep researching",id:"ODR/0L48DC"})})]})]})},b=e=>{let{prompt:t,files:n,attachments:a,syncSourceUuids:i,conversation:r,onSend:l,onStop:o,isSending:c,isDisabled:u,disabledReason:p,currentCompassTask:h}=e,m=(()=>{if(h)return"researching";if(r){let{isSampling:e,isStoppingSampling:t}=r;if(e)return t?"stopping":"sampling"}return t.length>0||n.length>0||a.length>0||i.length>0?"drafting":"empty"})();return(0,s.jsx)(d.N,{children:"sampling"===m||"stopping"===m?(0,s.jsx)(v,{onStop:o,isLoading:"stopping"===m},"stop"):"researching"===m?(0,s.jsx)(y,{conversationId:null==r?void 0:r.id,taskId:h},"stop_research"):(0,s.jsx)(j,{isSending:c,isDisabled:u,disabledReason:p,onSend:l},"send")})},y=e=>{let{conversationId:t,taskId:n}=e,a=(0,h.A)(),[c,d]=(0,p.useState)(!1),{mutate:u,isPending:g}=(0,x.hs)(t,null!=n?n:""),b=(0,p.useCallback)(()=>{t&&n&&(u(),d(!1))},[t,n,u]),y=(0,p.useCallback)(()=>{d(!0)},[]);return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||g||d(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[g]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.m,{tooltipContent:(0,s.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,s.jsx)(m.A,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,s.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,s.jsx)(m.A,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,s.jsx)(i.$,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:y,"aria-label":a.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:g?(0,s.jsx)(l.N,{className:"animate-spin",size:18}):(0,s.jsx)(o.X,{weight:"bold",size:16})})}),(0,s.jsx)(f,{isOpen:c,onClose:()=>d(!1),onConfirm:b,isLoading:g})]})},v=e=>{let{onStop:t,isLoading:n}=e,a=(0,h.A)();return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||n||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,n]),(0,s.jsx)(r.m,{tooltipContent:(0,s.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,s.jsx)(m.A,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,s.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,s.jsx)(m.A,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,s.jsx)(i.$,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:()=>t(),"aria-label":a.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:n?(0,s.jsx)(l.N,{className:"animate-spin",size:18}):(0,s.jsx)(o.X,{weight:"bold",size:16})})})},j=e=>{let{isSending:t,isDisabled:n,disabledReason:o,onSend:d}=e,m=(0,h.A)(),x=(0,p.useCallback)(()=>{(0,a.R)("event","msg_sent",{location:"chat_input"}),d()},[d]);return(0,s.jsx)(u.P.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:(0,s.jsx)(r.m,{tooltipContent:o,children:(0,s.jsx)("div",{children:(0,s.jsx)(i.$,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-8 !w-8",disabled:n,onClick:()=>x(),"aria-label":m.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:t?(0,s.jsx)(l.N,{className:"animate-spin",weight:"bold",size:16}):(0,s.jsx)(c.D,{weight:"bold",size:16})})})})})}},43156:(e,t,n)=>{n.d(t,{Eu:()=>x,WJ:()=>p,YW:()=>h,be:()=>u,fy:()=>m});var s=n(85644),a=n(1761),i=n(55554),r=n(27062),l=n(85544),o=n(92075);let c=!n(40459).env.NEXT_PUBLIC_DISABLE_WEB_SEARCH,d=()=>{let{value:e}=(0,r.fS)("claudeai_web_search_default_on");return e&&c},u=()=>{let{value:e}=(0,r.fS)("claudeai_web_search"),{selectedTier:t,isTierSelectorEnabled:n,shouldOverrideFeatureAccess:s}=(0,i.t)();return n&&s&&t?t===l.d7.PRO||t===l.d7.MAX||t===l.d7.ENTERPRISE:e&&c},p=()=>{var e;let t=(0,a.mV)(),{data:n}=(0,o.rX)(),s=!!n&&!(null==(e=n.disabled_features)?void 0:e.includes("web_search"));return c&&(!t||s)},h=()=>{let e=u(),t=p();return e&&t},m=e=>{var t,n,s;let i=p(),{account:r}=(0,a.YL)(),l=d();if(!i)return!1;let o=l?(null==r||null==(t=r.settings)?void 0:t.enabled_web_search)!==!1:!!(null==r||null==(n=r.settings)?void 0:n.enabled_web_search);return e?!!(null==e||null==(s=e.conversationSettings)?void 0:s.enabled_web_search):o},x=e=>{let t=(0,s.Wq)()(e,"web_search");return c&&t}},51291:(e,t,n)=>{n.d(t,{P:()=>Q});var s=n(54568),a=n(7620);let i=(0,a.createContext)({setOverrideSubmit:()=>!1});var r=n(91961),l=n(64863),o=n(97618),c=n(40082),d=n(49267),u=n(98300),p=n(88596),h=n(68665),m=n(78660),x=n(20591),g=n.n(x);let f=new c.hs("inputAutocomplete"),b=()=>({decoration:null,completion:null}),y=(e,t)=>c.LN.atEnd(e).$anchor.pos===t.$anchor.pos,v=e=>{let{editor:t}=e;if(!y(t.state.doc,t.state.selection))return!1;let n=f.getState(t.state);return!!n.decoration&&(t.view.dispatch(t.state.tr.insertText(n.completion.content)),!0)},j=(e,t,n,s)=>{let a=e.getMeta(f);if(a&&a.prompt===s.doc.textContent&&(t.completion=a),!y(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let i=document.createElement("span");i.className="text-text-500",i.textContent=t.completion.content;let r=document.createElement("span");r.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",r.textContent="Tab";let l=s.selection.$head.pos,o=m.NZ.widget(l,i),c=m.NZ.widget(l,r);return t.decoration=m.zF.create(s.doc,[o,c]),t},w=d.YY.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=g()(async(e,t)=>{try{let n=this.options.fetchInputAutocompletion,s=await n(t);s&&e.dispatch(e.state.tr.setMeta(f,{prompt:t,content:s}))}catch(e){}},300);return[new c.k_({key:f,state:{init:b,apply:j},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:n}=t.state.doc;return n.length>=3&&e(t,n),{update:(t,n)=>{var s;let{state:a}=t,{doc:i}=a;!n.doc.eq(i)&&(null==(s=f.getState(a).completion)?void 0:s.prompt)!==i.textContent&&i.textContent.length>=3&&e(t,i.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:v})});var k=n(74530);let A=e=>0===e.state.selection.$from.parentOffset,N=e=>"codeBlock"===e.state.selection.$from.parent.type.name,C=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),E=e=>"heading"===e.state.selection.$from.parent.type.name,S=e=>e.state.selection.$from.marks().some(e=>"bold"===e.type.name),_=e=>e.state.selection.$from.marks().some(e=>"italic"===e.type.name),L=e=>e.state.selection.$from.marks().some(e=>"strike"===e.type.name),z=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},I=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},K=e=>!(e.state.selection.$from.before()>0)&&(I(e),!0),D=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(I(e),!0),M=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),R=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),H=d.YY.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!N(t)&&!!A(t)&&M(t)}})}),T=d.YY.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!C(t)&&!!A(t)&&M(t)},ArrowDown:e=>{let{editor:t}=e;return!!C(t)&&!!z(t)&&R(t)},ArrowRight:e=>{let{editor:t}=e;return!!C(t)&&!!z(t)&&D(t)},ArrowLeft:e=>{let{editor:t}=e;return!!C(t)&&!!A(t)&&K(t)}})}),P=d.YY.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!E(t)&&!!A(t)&&M(t)},ArrowDown:e=>{let{editor:t}=e;return!!E(t)&&!!z(t)&&R(t)}})}),$=d.YY.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!S(t)&&!!z(t)&&D(t)}})}),Y=d.YY.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!_(t)&&!!z(t)&&D(t)}})}),O=d.YY.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!L(t)&&!!z(t)&&D(t)}})}),q=d.YY.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),B=d.YY.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new c.k_({key:new c.hs("pasteCodeAsPlainText"),props:{handlePaste:(e,t,n)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let a=t.clipboardData.getData("text/plain"),i=s.text(a);return e.dispatch(e.state.tr.replaceSelectionWith(i)),!0}}})]}),F=()=>(0,s.jsx)(u.VR,{className:"code-block",children:(0,s.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,s.jsx)(u.$p,{as:"code"})})}),G=e=>{let{tipTapEditorState:t,setTipTapEditorState:n,onReady:s,placeholder:a,extraEditorAttributes:i={},fetchInputAutocompletion:c}=e,d=[p.A.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),l.A.extend({addNodeView:()=>(0,u.gu)(F)}).configure({lowlight:h.l}),$,H,P,T,Y,O,B,q,o.A.configure({placeholder:a,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),w.configure({fetchInputAutocompletion:c})];return{editor:(0,u.hG)({editorProps:{attributes:{enterkeyhint:"enter",class:"break-words max-w-[60ch]",...i}},onCreate:()=>{null==s||s()},autofocus:!(0,r.Fr)()&&"end",extensions:d,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,a=t.getJSON();n((0,k.DV)(a)),s&&t.commands.focus("end")}})}};var W=n(32987),X=n(46760);let Q=(0,a.forwardRef)((e,t)=>{let{disabled:n,prompt:l,tipTapEditorState:o,setTipTapEditorState:d,placeholder:p,onSubmit:h,onReady:m,onFocus:x,onBlur:g,placement:f,fetchInputAutocompletion:b}=e,{editor:y}=G({tipTapEditorState:o,setTipTapEditorState:d,onReady:m,placeholder:p,fetchInputAutocompletion:b,extraEditorAttributes:{role:"textbox","aria-label":(0,X.A)().formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),"aria-multiline":"true","aria-required":"false","aria-invalid":"false"}}),[v,j]=(0,a.useState)(!1);return(0,a.useImperativeHandle)(t,()=>({setContent(e){e!==l&&(null==y||y.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){y.setOptions({editable:e})},focus(){null==y||y.commands.focus()},getPosition:()=>null==y?void 0:y.state.selection.$anchor,getEditor:()=>y,getIsAtEnd(){if(!y)return;let e=y.state.selection.$anchor.pos;return c.LN.atEnd(y.state.doc).$anchor.pos===e},scrollToEnd(){y&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.commands.setTextSelection(y.state.doc.content.size),y.commands.scrollIntoView();let e=y.view.dom.parentElement;e&&(e.scrollTop=e.scrollHeight)})})}}),[y,l]),(0,a.useEffect)(()=>{null==y||y.setOptions({editable:!n})},[y,n]),(0,a.useEffect)(()=>{if(null!==y&&""!==p){let e=y.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=p,y.view.dispatch(y.state.tr))}},[y,p]),(0,s.jsx)(i.Provider,{value:{setOverrideSubmit:j},children:(0,s.jsx)(u.$Z,{className:(0,W.A)("max-h-96 w-full overflow-y-auto font-large break-words transition-opacity duration-200","bottom"===f?"min-h-[1.5rem]":"min-h-[3rem]",!(null==y?void 0:y.isEditable)&&"opacity-60"),editor:y,onKeyDownCapture:e=>{"Enter"===e.key&&h&&(v||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,r.Fr)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),h(e)))},onFocus:x,onBlur:g})})});Q.displayName="PromptInput"},52080:(e,t,n)=>{n.d(t,{D:()=>i});var s=n(54568),a=n(7620);let i=e=>{let{style:t,children:n,duration:i=200,delay:r=0,easing:l="ease-in-out",className:o="",onTransitionEnd:c=()=>void 0}=e,d=(0,a.useRef)(null),[u,p]=(0,a.useState)("auto"),h=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(d.current)return h.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;p("".concat(e,"px"))}}),h.current.observe(d.current),()=>{h.current&&h.current.disconnect()}},[]),(0,s.jsx)("div",{style:{height:u,transitionDelay:"".concat(r,"ms"),transitionTimingFunction:l,transitionDuration:"".concat(i,"ms"),transitionProperty:"height",...t},className:o,onTransitionEnd:()=>{c()},children:(0,s.jsx)("div",{className:"w-full",ref:d,children:n})})}},61547:(e,t,n)=>{n.d(t,{a:()=>o,t:()=>c});var s=n(54568),a=n(29242),i=n(32987),r=n(59681),l=n(7620);function o(e){let{state:t="static",className:o="w-8 text-accent-brand inline-block",isInteractive:d=!0}=e,u=(0,l.useRef)(null),p=(0,l.useRef)(t),h=(0,r.I)(),[m,x]=(0,l.useState)(),[g,f]=(0,l.useState)(t),[b,y]=(0,l.useReducer)(e=>e+1,0);(0,l.useEffect)(()=>{n.e(5757).then(n.bind(n,95757)).then(e=>{x(e.animations)})},[]),(0,l.useEffect)(()=>f(t),[t]),(0,l.useEffect)(()=>{let e,t=u.current&&"function"==typeof u.current.animate;if(!h&&"static"!==g&&t&&m){var n;let{frameCount:t,speed:s}=m[g],a=Array.from({length:t},(e,n)=>({transform:"translateY(-".concat(100/t*n,"%)")}));e=null==(n=u.current)?void 0:n.animate(a,{duration:s*a.length,iterations:"tickle"===g?1:1/0,easing:"steps(".concat(a.length,", jump-none)")}),"tickle"===g&&(null==e||e.addEventListener("finish",()=>f(p.current)))}return"tickle"!==g&&(p.current=g),()=>{null==e||e.cancel()}},[m,g,h]);let v=()=>{d&&"writing"!==g&&"thinking"!==g&&"tickle"!==g&&(f("tickle"),y())},j="Hi, I’m Claude. How can I help you today?";b<32&&b>24?j="Ugh, well you can’t do that forever":b<=24&&b>18?j="Alright, alright, you have my attention!":b<=18&&b>12?j="Are you still doing that?":b<=12&&b>5&&(j="Yes, yes. What can I do for you?");let w=!d||"writing"===g||"thinking"===g;if("static"===g||h||!m)return(0,s.jsx)(a.m,{className:(0,i.A)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:j,side:"right",children:(0,s.jsx)("div",{className:(0,i.A)(o,"select-none"),onMouseDown:v,children:(0,s.jsx)(c,{className:"w-full fill-current"})})});let{svg:k,width:A,height:N}=m[g];return(0,s.jsx)(a.m,{className:(0,i.A)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:j,side:"right",children:(0,s.jsx)("div",{className:(0,i.A)(o,"overflow-hidden select-none"),style:{aspectRatio:A/N},onMouseDown:v,children:(0,s.jsx)("div",{ref:u,className:"[&>svg]:block [&>svg]:w-full [&>svg]:fill-current",dangerouslySetInnerHTML:{__html:k}})})})}function c(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",...e,children:(0,s.jsx)("path",{d:"m19.6 66.5 19.7-11 .3-1-.3-.5h-1l-3.3-.2-11.2-.3L14 53l-9.5-.5-2.4-.5L0 49l.2-1.5 2-1.3 2.9.2 6.3.5 9.5.6 6.9.4L38 49.1h1.6l.2-.7-.5-.4-.4-.4L29 41l-10.6-7-5.6-4.1-3-2-1.5-2-.6-4.2 2.7-3 3.7.3.9.2 3.7 2.9 8 6.1L37 36l1.5 1.2.6-.4.1-.3-.7-1.1L33 25l-6-10.4-2.7-4.3-.7-2.6c-.3-1-.4-2-.4-3l3-4.2L28 0l4.2.6L33.8 2l2.6 6 4.1 9.3L47 29.9l2 3.8 1 3.4.3 1h.7v-.5l.5-7.2 1-8.7 1-11.2.3-3.2 1.6-3.8 3-2L61 2.6l2 2.9-.3 1.8-1.1 7.7L59 27.1l-1.5 8.2h.9l1-1.1 4.1-5.4 6.9-8.6 3-3.5L77 13l2.3-1.8h4.3l3.1 4.7-1.4 4.9-4.4 5.6-3.7 4.7-5.3 7.1-3.2 5.7.3.4h.7l12-2.6 6.4-1.1 7.6-1.3 3.5 1.6.4 1.6-1.4 3.4-8.2 2-9.6 2-14.3 3.3-.2.1.2.3 6.4.6 2.8.2h6.8l12.6 1 3.3 2 1.9 2.7-.3 2-5.1 2.6-6.8-1.6-16-3.8-5.4-1.3h-.8v.4l4.6 4.5 8.3 7.5L89 80.1l.5 2.4-1.3 2-1.4-.2-9.2-7-3.6-3-8-6.8h-.5v.7l1.8 2.7 9.8 14.7.5 4.5-.7 1.4-2.6 1-2.7-.6-5.8-8-6-9-4.7-8.2-.5.4-2.9 30.2-1.3 1.5-3 1.2-2.5-2-1.4-3 1.4-6.2 1.6-8 1.3-6.4 1.2-7.9.7-2.6v-.2H49L43 72l-9 12.3-7.2 7.6-1.7.7-3-1.5.3-2.8L24 86l10-12.8 6-7.9 4-4.6-.1-.5h-.3L17.2 77.4l-4.7.6-2-2 .2-3 1-1 8-5.5Z"})})}},62757:(e,t,n)=>{n.d(t,{BU:()=>w,G8:()=>v,Gm:()=>k,Ow:()=>y,g7:()=>b,hs:()=>A});var s=n(85644),a=n(77186),i=n(1761),r=n(55554),l=n(27062),o=n(77101),c=n(85544),d=n(99965),u=n(92947),p=n(85717),h=n(45078),m=n(91768),x=n(43156),g=n(40459);let f=()=>{let{value:e}=(0,l.fS)("use_incoherent_traffic_light_noises"),{selectedTier:t,isTierSelectorEnabled:n,shouldOverrideFeatureAccess:s}=(0,r.t)();return n&&s&&t?t===c.d7.MAX||t===c.d7.ENTERPRISE:e},b=()=>{let e=f(),t=j();return e&&t&&!g.env.NEXT_PUBLIC_DISABLE_COMPASS},y=()=>{let e=f(),t=w();return e&&t},v=()=>{let e=(0,s.Wq)();return t=>e(t,"compass")},j=()=>{let e=(0,x.be)(),t=(0,p.fb)(),n=(0,m.XE)(o.v8.GMAIL),s=(0,m.XE)(o.v8.GCAL),a=(0,d.lu)();return e||t||n||s||a},w=()=>{let e=(0,x.YW)(),t=(0,p.K6)(),n=(0,m.Ys)(o.v8.GMAIL),s=(0,m.Ys)(o.v8.GCAL),{servers:a}=(0,u.gt)(),i=a.filter(e=>"remote"===e.type).length>0;return e||t||n||s||i},k=e=>{var t;let n=(0,x.fy)(e),s=(0,p.$f)(e),{isAuthenticated:a}=(0,p.kJ)(),i=(0,m.X0)(o.v8.GMAIL,e),{isAuthenticated:r}=(0,m.ob)(o.v8.GMAIL),l=(0,m.X0)(o.v8.GCAL,e),{isAuthenticated:c}=(0,m.ob)(o.v8.GCAL),{servers:d}=(0,u.gt)(),g=!1,f=null!=(t=(0,h.vP)("enabled_mcp_tools"))?t:{};for(let e of d.filter(e=>"remote"===e.type&&(e.isConnected||e.isAuthless))||[])if(e.tools.some(t=>!1!==f[(0,u.Cc)(e.uuid,t.name)])){g=!0;break}return n||s&&a||i&&r||l&&c||g},A=(e,t)=>{let{activeOrganization:n}=(0,i.YL)(),s=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(s,"/chat_conversations/").concat(e,"/task/").concat(t,"/stop"),"POST",{enabled:!!(s&&e&&t)})}},93271:(e,t,n)=>{n.d(t,{$:()=>j,u:()=>z});var s=n(42977),a=n(54568),i=n(9537),r=n(15046),l=n(90510),o=n(29242),c=n(91961),d=n(58911),u=n(62094),p=n(60265),h=n(34405),m=n(32987),x=n(61773),g=n(62971);let f=e=>{let{count:t}=e;return(0,a.jsx)("span",{className:"w-[1.125rem] h-[1.125rem] border-border-300 border-0.5 flex items-center justify-center text-[0.625rem] font-medium bg-accent-secondary-100/[8%] text-accent-secondary-100 rounded-full",children:t})};function b(){let e=(0,s._)(["\n  flex \n  flex-row \n  items-center \n  flex-1 \n  min-w-28\n"]);return b=function(){return e},e}function y(){let e=(0,s._)(["\n  flex \n  flex-col  \n  flex-1 \n  min-w-0\n"]);return y=function(){return e},e}function v(){let e=(0,s._)(["\n  text-[0.75rem]\n  text-text-500\n  text-ellipsis \n  break-words \n  whitespace-nowrap \n  min-w-0\n  overflow-hidden\n"]);return v=function(){return e},e}let j=e=>{let{item:t,onClick:n,isHighlighted:s,onMouseOver:l,countDisplayVariant:o}=e,x=s&&!(0,c.fJ)(),b={disabled:t.isDisabled,onClick:t.isDisabled?void 0:()=>{null==n||n()},onMouseOver:l},y=t.isDisabled||"pro"===t.tag||"new chat"===t.tag;return"subheader"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsx)(k,{...b,children:(0,a.jsx)(E,{children:t.label})})}):"button"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(k,{className:(0,m.A)("primary"===t.variant&&"justify-center pr-4","primary"===t.variant&&x&&"!bg-accent-secondary-900/50 !text-accent-secondary-100"),isHighlighted:x,...b,children:[(0,a.jsx)(A,{appearsDisabled:y,isHighlighted:x,itemKey:t.key,children:t.icon}),(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{isHighlighted:x,appearsDisabled:y,children:t.label}),(0,a.jsx)(z,{tag:t.tag})]}),(0,a.jsx)(L,{className:"!text-text-500 opacity-70",children:t.secondaryText}),t.isExternal&&(0,a.jsx)(d.B,{size:16,className:"text-text-500 opacity-70"})]})}):"buttonGroup"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(k,{...b,isHighlighted:x,children:[(0,a.jsx)(A,{appearsDisabled:y,isHighlighted:x,itemKey:t.key,children:t.icon}),(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{isHighlighted:x,appearsDisabled:y,children:t.label}),(0,a.jsx)(z,{tag:t.tag})]}),(0,a.jsx)(u.K,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleGroup"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(k,{...b,isHighlighted:x,children:[(0,a.jsx)(A,{appearsDisabled:y,isHighlighted:x,itemKey:t.key,children:t.icon}),(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{isHighlighted:x,appearsDisabled:y,children:t.label}),(0,a.jsx)(z,{tag:t.tag})]}),t.enabledCount?"verbose"===o?(0,a.jsx)("span",{className:"text-accent-secondary-100",children:(0,a.jsx)(g.A,{defaultMessage:"{count} enabled",values:{count:t.enabledCount},id:"yA/nbBqm+9"})}):(0,a.jsx)(f,{count:t.enabledCount}):(0,a.jsx)("span",{className:"text-text-500",children:(0,a.jsx)(g.A,{defaultMessage:"Disabled",id:"tthToSLF5Z"})}),(0,a.jsx)(u.K,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"optionGroup"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(k,{...b,isHighlighted:x,children:[(0,a.jsx)(A,{appearsDisabled:y,isHighlighted:x,itemKey:t.key,children:t.icon}),(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{isHighlighted:x,appearsDisabled:y,children:t.label}),(0,a.jsx)(z,{tag:t.tag})]}),(0,a.jsx)(L,{children:t.secondaryText}),(0,a.jsx)(u.K,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleAll"===t.type||"toggle"===t.type||"switch"===t.type||"option"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(k,{...b,hasSubtitle:!!t.subtitle,className:(0,m.A)("active:!scale-100",t.isChecked&&"text-primary-500"),isHighlighted:x,children:[(0,a.jsx)(A,{appearsDisabled:y,isHighlighted:x,itemKey:t.key,children:t.icon}),(0,a.jsxs)(C,{children:[(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{isHighlighted:x,appearsDisabled:y,children:t.label}),(0,a.jsx)(I,{tag:t.timeTag}),(0,a.jsx)(z,{tag:t.tag})]}),(0,a.jsx)(_,{children:t.subtitle})]}),"toggleAll"===t.type&&(0,a.jsx)(i.Sc,{variant:"minus",disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,m.A)(y?"!cursor-default":"!opacity-100 !cursor-pointer")}),"toggle"===t.type&&(0,a.jsx)(i.Sc,{disabled:!0,checked:t.isChecked,label:"",hideLabel:!0,className:(0,m.A)(y?"!cursor-default":"!opacity-100 !cursor-pointer")}),"switch"===t.type&&(0,a.jsx)(r.j,{readOnly:!0,height:16,width:28,checked:t.isChecked,className:(0,m.A)(!t.isDisabled&&"!cursor-pointer",y&&"opacity-50")}),"option"===t.type&&t.isChecked&&(0,a.jsx)(p.J,{weight:"bold",size:16,className:"text-accent-secondary-100 shrink-0"})]})}):"divider"===t.type?(0,a.jsx)("div",{className:"h-[0.5px] my-1.5 mx-0.5 bg-border-300"}):"back"===t.type?(0,a.jsx)(w,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,a.jsxs)(k,{...b,isHighlighted:x,children:[(0,a.jsx)(A,{itemKey:t.key,children:(0,a.jsx)(h.n,{size:16,className:(0,m.A)("h-4 w-4 text-text-500 group-hover:!text-text-400",x&&"!text-text-400")})}),(0,a.jsx)("span",{className:"relative",children:(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{className:(0,m.A)("opacity-100 transition-opacity text-text-500 group-hover:!text-text-400",x&&"!text-text-400"),children:t.label}),(0,a.jsx)(z,{tag:t.tag})]})})]})}):null},w=e=>{let{tooltip:t,tooltipImage:n,children:s}=e,i=(0,a.jsx)("div",{className:"",children:s});return t?(0,a.jsx)(o.m,{sideOffset:10,contentStyle:n?"sampleImage":"inputMenu",tooltipContent:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[!!n&&(0,a.jsx)(x.default,{src:n.src,alt:"",width:n.width,height:n.height,className:"rounded-[6px] overflow-hidden"}),(0,a.jsx)("p",{className:"p-1",children:t})]}),side:"right",children:i}):i},k=e=>{let{isHighlighted:t,className:n,hasSubtitle:s,...i}=e;return(0,a.jsx)("button",{...i,className:(0,m.A)("group flex w-full items-center text-left gap-2.5 py-auto px-1.5 text-[0.875rem] text-text-200 rounded-md transition-colors select-none",t&&!i.disabled&&"!bg-bg-200/50 !text-text-000",n,!i.disabled&&"active:scale-[0.995] hover:bg-bg-200/50 hover:text-text-000",s?"h-[3rem]":"h-[2rem]")})},A=e=>{let{appearsDisabled:t,isHighlighted:n,itemKey:s,children:i,...r}=e;return(0,a.jsx)("div",{className:(0,m.A)("group/icon min-w-4 min-h-4 flex items-center justify-center text-text-300 shrink-0",t&&"opacity-50",n&&!t&&"!text-text-100",!t&&"group-hover:text-text-100"),...r,children:i})},N=l.J.div(b()),C=l.J.div(y()),E=e=>{let{className:t,...n}=e;return(0,a.jsx)("p",{...n,className:(0,m.A)("text-[0.8125rem] text-text-500 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)})},S=e=>{let{appearsDisabled:t,isHighlighted:n,className:s,...i}=e;return(0,a.jsx)("p",{...i,className:(0,m.A)("text-[0.9375rem] text-text-300 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",n&&!t&&"!text-text-100",s,t&&"opacity-50",!t&&"group-hover:text-text-100")})},_=l.J.p(v()),L=e=>{let{className:t,...n}=e;return n.children?(0,a.jsx)("p",{...n,className:(0,m.A)("flex-initial text-right shrink text-[0.875rem] text-accent-secondary-100 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)}):null},z=e=>{let{tag:t,className:n}=e;return t?(0,a.jsx)("div",{className:(0,m.A)("uppercase inline-flex items-center text-[0.5625rem] font-medium h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0 will-change-transform",("pro"===t||"new chat"===t||"alpha"===t)&&"text-text-300 bg-bg-300/60","beta"===t&&"text-accent-secondary-100 bg-accent-secondary-100/[8%]",n),children:t}):null},I=e=>{let{tag:t,className:n}=e;return t?(0,a.jsx)("div",{className:(0,m.A)("text-text-500 bg-bg-100 inline-flex items-center text-[0.5625rem] h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0",n),children:t}):null}},99965:(e,t,n)=>{n.d(t,{W3:()=>m,eB:()=>u,ll:()=>h,lu:()=>c,qb:()=>p});var s=n(98518),a=n(77186),i=n(71473),r=n(27062),l=n(87606),o=n(75006);let c=()=>{let{value:e}=(0,r.fS)("papi_mcp");return e},d=o.z.object({uuid:o.z.string().uuid(),name:o.z.string(),url:o.z.string(),created_at:o.z.string().datetime(),updated_at:o.z.string().datetime(),custom_oauth_client_id:o.z.string().nullable().optional(),is_authenticated:o.z.boolean().default(!1)});function u(e,t){let n=c();return(0,a.Sk)("/api/organizations/".concat(e,"/mcp/remote_servers"),{queryKey:[i.lA,e],enabled:n&&!!e,...t,select:e=>o.z.array(d).parse(e)})}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,{track:r}=(0,s.st)(),o=(0,l.useQueryClient)();return r({event_key:"claudeai.mcp.create_server",source:n.source,type:"remote"}),(0,a.L2)("/api/organizations/".concat(e,"/mcp/remote_servers"),"POST",{...t,onSuccess:(n,s,a)=>{var r;o.invalidateQueries({queryKey:[i.lA,e]}),o.invalidateQueries({queryKey:[i.qE,e]}),null==(r=t.onSuccess)||r.call(t,n,s,a)}})}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,l.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/mcp/remote_servers/").concat(t),"DELETE",{...n,onSuccess:(t,a,r)=>{var l;s.invalidateQueries({queryKey:[i.lA,e]}),s.invalidateQueries({queryKey:[i.qE,e]}),null==(l=n.onSuccess)||l.call(n,t,a,r)}})}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,l.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/mcp/logout/").concat(t),"POST",{...n,onSuccess:(t,a,r)=>{var l;s.invalidateQueries({queryKey:[i.lA,e]}),s.invalidateQueries({queryKey:[i.qE,e]}),null==(l=n.onSuccess)||l.call(n,t,a,r)}})}o.z.object({name:o.z.string(),url:o.z.string(),custom_oauth_client_id:o.z.string().nullable().optional()}),o.z.object({name:o.z.string().optional().nullable(),url:o.z.string().optional().nullable()})}}]);